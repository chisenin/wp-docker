# WordPress Docker 部署方案更新说明

## 概述

本仓库提供了基于Docker的WordPress部署方案，包含PHP和Nginx容器化配置，支持自动版本监测和手动触发构建。

## 最新功能更新

### v1.0.0 (最新)

- **模块化构建系统**：支持单独构建PHP、Nginx、基础镜像或全部组件
- **自动版本监测**：定期检查Alpine、PHP、Nginx和Composer的最新版本并自动更新
- **手动触发功能**：通过GitHub Actions界面手动选择要构建的组件
- **统一发布机制**：无论是自动版本更新还是手动触发，都会生成标准的GitHub Release
- **Docker Compose验证**：构建前验证配置文件的有效性
- **完整的依赖处理**：当基础镜像更新时，自动触发PHP和Nginx的重新构建

## 版本兼容性

| 组件 | 推荐版本 | 最低版本 |
|------|---------|----------|
| PHP  | 8.3.x   | 8.1.x    |
| Nginx| 1.27.x  | 1.25.x   |
| Alpine| 3.20.x  | 3.19.x   |
| Composer| 2.7.x  | 2.5.x   |

## 更新流程

### 自动更新

1. 工作流定时运行版本检查脚本
2. 检测到组件更新时，自动构建并推送新镜像
3. 生成包含更新详情的GitHub Release

### 手动更新

1. 在GitHub Actions页面手动触发构建工作流
2. 选择需要构建的组件（base/php/nginx/all）
3. 系统执行构建并推送选定组件
4. 生成手动触发的GitHub Release

## 镜像使用

```bash
# 使用最新的PHP镜像
docker pull chisenin/wordpress-php:8.3.26

# 使用最新的Nginx镜像
docker pull chisenin/wordpress-nginx:1.27.2
```

## 常见问题

### 构建失败

- 检查Docker Hub凭据是否正确配置
- 确认版本文件格式是否符合要求
- 查看工作流日志获取详细错误信息

### 镜像拉取问题

- 确保Docker可以访问Docker Hub
- 验证镜像名称和标签是否正确

## 贡献指南

欢迎提交Pull Request和Issue。提交代码前请确保所有测试通过，并遵循现有代码风格。

## 许可证

本项目采用MIT许可证。

## v1.0.0

### 发布日期：2024-07-18

### 主要特性

1. **版本监控**：自动检测并更新 PHP、Nginx、Alpine 和 Composer 的最新版本
2. **自动化部署**：通过 GitHub Actions 实现容器镜像构建、推送和自动部署
3. **多环境支持**：区分开发和生产环境的 Docker Compose 配置
4. **安全实践**：包含 .env 文件管理、敏感信息保护等安全措施
5. **优化性能**：实现多阶段构建、镜像优化和资源管理

### 当前组件版本

- **PHP**: 8.3.26
- **Nginx**: stable-alpine
- **Alpine**: 3.22 系列最新版本
- **Composer**: 最新稳定版

### 自动化工作流

- `build-and-push.yml`: 构建并推送 Docker 镜像到容器仓库
- `version-monitor.yml`: 每周自动检查组件版本更新
- `verify-only.yml`: 验证配置文件的有效性

### 使用说明

**自动部署脚本**:
```bash
# 运行自动部署脚本
./scripts/auto_deploy.sh

# 选择部署环境（开发/生产）
# 脚本会处理构建、测试和部署流程
```

**版本监控**:
- 系统每周自动检查版本更新
- 检测到新版本时自动更新版本文件并触发构建
- 支持手动触发版本检查

### 未来计划

1. 完善监控和告警体系
2. 增强数据库备份和恢复机制
3. 优化容器资源使用和性能监控

---

*此发布基于项目的当前状态，包含了版本监控功能和自动化部署能力，为WordPress站点提供了完整的Docker化解决方案。*